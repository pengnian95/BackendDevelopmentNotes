# 聚簇索引
#4. 数据库/索引#
- - - -
定义数据行的物理顺序与列值（一般是主键的那一列）的逻辑顺序相同，一个表中只能拥有一个聚集索引。
MySQL默认主键为聚簇索引。

## 优点
1. 可以把相关数据保存在一起，减少了磁盘读取次数。
2. 数据访问更快。聚簇索引通常比费聚簇索引中的查找更快。
3. 使用覆盖索引扫描的查询可以直接使用页节点中的主键值。

## 缺点
1. 如果数据全部位于内存，聚簇索引没有什么优势。
2. 插入速度严重依赖于插入顺序。
3. 更新聚簇索引列的代价很高，会强制InnoDB将每个被更新的行移动到新的位置。
4. 插入时可能会导致该页分裂为两个页，占用更多的空间。
5. 可能导致全表的扫面变慢，尤其是行比较稀疏或者页分裂导致页面不连续的时候。
6. 二级索引（非聚簇索引）非常大，因为二级索引的叶子节点包含了引用行的主键列。
7. 二级索引访问需要两次索引查找，因为**二级索引叶子节点保存的不是指向行的物理位置的指针，而是行的主键值。**
## 总结
1. 使用聚集索引的查询效率要比非聚集索引的效率要高，但是如果需要频繁去改变聚集索引的值，写入性能并不高，因为需要移动对应数据的物理位置。
2. 非聚集索引在查询的时候可以的话就**避免二次查询**，这样性能会大幅提升。
3. 不是所有的表都适合建立索引，只有数据量大表才适合建立索引，且建立在选择性高的列上面性能会更好。
 
