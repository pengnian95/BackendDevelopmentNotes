# 类加载机制
#3. JVM/类加载#
- - - -
## JVM的类加载机制
* 类的加载指的是**将类的.class文件中的二进制数据读入到内存中，将其放在运行时数据区的 _方法区_ 内，然后在 _堆区_ 创建一个java.lang.Class对象，用来封装类在方法区内的数据结构**。类的加载的**最终产品是位于堆区中的Class对象**，Class对象封装了类在方法区内的数据结构，并且向Java程序员提供了访问方法区内的数据结构的接口。
* 类加载器并不需要等到某个类被“首次主动使用”时再加载它，JVM规范允许类加载器在预料某个类将要被使用时就**预先加载**它。

* **全盘负责**：当一个类加载器负责加载某个Class时，该Class所依赖的和引用的其他Class也将由该类加载器负责载入，除非显示使用另外一个类加载器来载入
* **父类委托**：先让父类加载器试图加载该类，**只有在父类加载器无法加载该类时才尝试从自己的类路径中加载该类**
* **缓存机制**：缓存机制将会保证所有加载过的Class都会被缓存，当程序中需要使用某个Class时，类加载器先从缓存区寻找该Class，只有缓存区不存在，系统才会读取该类对应的二进制数据，并将其转换成Class对象，存入缓存区。这就是为什么修改了Class后，必须重启JVM，程序的修改才会生效

## 三种类加载方式
1. 命令行启动应用时候由JVM初始化加载
2. 通过`Class.forName()`方法动态加载
3. 通过`ClassLoader.loadClass()`方法动态加载
