# 间隙锁
## 使用条件
1. 当我们 _用范围条件而不是相等条件检索数据，并请求共享或排他锁时_ ，InnoDB会给符合条件的已有数据记录的索引项加锁
2. 对于 _键值在条件范围内但并不存在的记录_ ，叫做“间隙（GAP)”，InnoDB也会对这个“间隙”加锁，这种锁机制就是所谓的间隙锁（Next-Key锁）。

## 作用
1. 防止::幻读::，以满足相关隔离级别的要求。对于上面的例子，要是不使用间隙锁，如果其他事务插入了empid大于100的任何记录，那么本事务如果再次执行上述语句，就会发生幻读；
2. 为了满足其::恢复和复制::的需要。
在实际应用开发中，尤其是*并发插入比较多*的应用，我们要尽量优化业务逻辑，尽量使用*相等条件*来访问更新数据，避免使用范围条件。