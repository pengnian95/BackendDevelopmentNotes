# 进程
## 进程间通信
**进程间通信（IPC，Inter-Process Communication）**，指至少两个进程或线程间传送数据或信号的一些技术或方法。*进程是计算机系统分配资源的最小单位。每个进程都有自己的一部分独立的系统资源，彼此是隔离的。*为了能使不同的进程互相访问资源并进行协调工作，才有了进程间通信。这些进程可以运行在同一计算机上或网络连接的不同计算机上。 进程间通信技术包括消息传递、同步、共享内存和远程过程调用。

### 管道
管道是Linux支持的最初Unix IPC形式之一，具有以下特点：
1. 管道是半双工的，数据只能向一个方向流动；需要双方通信时，需要建立起两个管道。
	2. 只能用于父子进程或者兄弟进程之间（具有::亲缘关系::的进程）。
	3. 单独构成一种独立的文件系统：管道对于管道两端的进程而言，就是一个文件，但它不是普通的文件，它不属于某种文件系统，而是自立门户，单独构成一种文件系统，并且只存在与内存中。
	4. 数据的读出和写入：一个进程向管道中写的内容被管道另一端的进程读出。写入的内容每次都添加在管道缓冲区的末尾，并且每次都是从缓冲区的头部读出数据。
局限：
1. 只支持::单向::数据流；
	2. 只能用于具有::亲缘关系::的进程之间；
	3. 没有::名字::；
	4. 管道的::缓冲区是有限的::（管道制存在于内存中，在管道创建时，为缓冲区分配一个页面大小）；
	5. 管道所传送的是::无格式字节流::，这就要求管道的读出方和写入方必须事先约定好数据的格式。


### 有名管道
FIFO不同于管道之处在于它提供一个::路径名::与之关联，以FIFO的文件形式存在于文件系统中。这样，即使与FIFO的创建进程不存在亲缘关系的进程，只要可以访问该路径，就能够彼此通过FIFO相互通信（能够访问该路径的进程以及FIFO的创建进程之间），因此，通过FIFO不相关的进程也能交换数据。

---
### 信号
信号是在::软件层次::上对中断机制的一种模拟，在原理上，一个进程收到一个信号与处理器收到一个中断请求可以说是一样的。信号是异步的，一个进程不必通过任何操作来等待信号的到达，事实上，进程也不知道信号到底什么时候到达。信号事件的发生有两个来源：硬件来源(比如我们按下了键盘或者其它硬件故障)；软件来源，最常用发送信号的系统函数是 _kill、raise、alarm和setitimer以及sigqueue函数_ ，软件来源还包括一些非法运算等操作。


### 消息队列
与命名管道相比，消息队列的优势在于：
1. 消息队列也可以独立于发送和接收进程而存在，从而消除了在同步命名管道的打开和关闭时可能产生的困难。
2. 同时通过发送消息还可以避免命名管道的::同步和阻塞问题::，不需要由进程自己来提供同步方法。
3. 接收程序可以通过消息类型::有选择地接收数据::，而不是像命名管道中那样，只能默认地接收。


### 信号量
信号量与其他进程间通信方式不大相同，它主要提供对进程间共享资源访问控制机制。相当于内存中的标志，进程可以根据它判定是否能够访问某些共享资源，同时，进程也可以修改该标志。除了用于访问控制外，还可用于进程同步。信号量有以下两种类型：
* 二值信号量：最简单的信号量形式，信号灯的值只能取0或1，类似于互斥锁。
* 计算信号量：信号量的值可以取任意非负值（当然受内核本身的约束）。

信号量只能进行两种操作等待和发送信号，即P(sv)和V(sv),他们的行为是这样的：
* P(sv)：如果sv的值大于零，就给它减1；如果它的值为零，就挂起该进程的执行
* V(sv)：如果有其他进程因等待sv而被挂起，就让它恢复运行，如果没有进程因等待sv而挂起，就给它加1.


### 共享内存
::速度最快，效率最高::的进程间通信方式，进程之间直接访问内存，而不是通过传送数据。但是使用共享内存需要自己提供::同步机制::。


### 套接字
socket API原本是为网络通讯设计的，但后来在socket的框架上发展出一种IPC机制，就是UNIX Domain Socket。虽然网络socket也可用于同一台主机的进程间通讯（通过loopback地址127.0.0.1），但是UNIX Domain Socket用于IPC更有效率：不需要经过网络协议栈，不需要打包拆包、计算校验和、维护序号和应答等，只是将应用层数据从一个进程拷贝到另一个进程。

---- 
## 进程间同步方式
![]()

## 携程
相当于微线程.一个线程执行
协程极高的执行效率。因为子程序function内切换不是线程切换，而是由程序自身控制，因此，::没有线程切换的开销::，和多线程比，线程数量越多，协程的性能优势就越明显。

